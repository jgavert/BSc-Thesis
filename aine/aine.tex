% --- Template for thesis / report with tktltiki2 class ---

\documentclass[finnish]{tktltiki2}

% tktltiki2 automatically loads babel, so you can simply
% give the language parameter (e.g. finnish, swedish, english, british) as
% a parameter for the class: \documentclass[finnish]{tktltiki2}.
% The information on title and abstract is generated automatically depending on
% the language, see below if you need to change any of these manually.
%
% Class options:
% - grading                 -- Print labels for grading information on the front page.
% - disablelastpagecounter  -- Disables the automatic generation of page number information
%                              in the abstract. See also \numberofpagesinformation{} command below.
%
% The class also respects the following options of article class:
%   10pt, 11pt, 12pt, final, draft, oneside, twoside,
%   openright, openany, onecolumn, twocolumn, leqno, fleqn
%
% The default font size is 11pt. The paper size used is A4, other sizes are not supported.
%
% rubber: module pdftex

% --- General packages ---

\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usepackage{microtype}
\usepackage{amsfonts,amsmath,amssymb,amsthm,booktabs,color,enumitem,graphicx}
\usepackage[pdftex,hidelinks]{hyperref}

% Automatically set the PDF metadata fields
\makeatletter
\AtBeginDocument{\hypersetup{pdftitle = {\@title}, pdfauthor = {\@author}}}
\makeatother

% --- Language-related settings ---
%
% these should be modified according to your language

% babelbib for non-english bibliography using bibtex
\usepackage[fixlanguage]{babelbib}
\selectbiblanguage{finnish}

% add bibliography to the table of contents
\usepackage[nottoc,numbib]{tocbibind}
% tocbibind renames the bibliography, use the following to change it back
\settocbibname{Lähteet}

% --- Theorem environment definitions ---

\newtheorem{lau}{Lause}
\newtheorem{lem}[lau]{Lemma}
\newtheorem{kor}[lau]{Korollaari}

\theoremstyle{definition}
\newtheorem{maar}[lau]{Määritelmä}
\newtheorem{ong}{Ongelma}
\newtheorem{alg}[lau]{Algoritmi}
\newtheorem{esim}[lau]{Esimerkki}

\theoremstyle{remark}
\newtheorem*{huom}{Huomautus}


% --- tktltiki2 options ---
%
% The following commands define the information used to generate title and
% abstract pages. The following entries should be always specified:

\title{Välimuistiriippumaton malli}
\author{Juho-Emil Antti Gävert}
\date{\today}
\level{Aine}
\abstract{Tiivistelmä.}

% The following can be used to specify keywords and classification of the paper:

\keywords{algoritmit, välimuistiriippumaton -malli}
\classification{} % classification according to ACM Computing Classification System (http://www.acm.org/about/class/)
                  % This is probably mostly relevant for computer scientists

% If the automatic page number counting is not working as desired in your case,
% uncomment the following to manually set the number of pages displayed in the abstract page:
%
% \numberofpagesinformation{16 sivua + 10 sivua liitteissä}
%
% If you are not a computer scientist, you will want to uncomment the following by hand and specify
% your department, faculty and subject by hand:
%
% \faculty{Matemaattis-luonnontieteellinen}
% \department{Tietojenkäsittelytieteen laitos}
% \subject{Tietojenkäsittelytiede}
%
% If you are not from the University of Helsinki, then you will most likely want to set these also:
%
% \university{Helsingin Yliopisto}
% \universitylong{HELSINGIN YLIOPISTO --- HELSINGFORS UNIVERSITET --- UNIVERSITY OF HELSINKI} % displayed on the top of the abstract page
% \city{Helsinki}
%


\begin{document}

% --- Front matter ---

\maketitle        % title page
%\makeabstract     % abstract page

\tableofcontents  % table of contents
\newpage          % clear page after the table of contents


% --- Main matter ---

% \cite{btree05}
% \cite{prokop99}
% \cite{coalgo}

\section{Johdanto}
Algoritmeista puhuttaessa ensimmäiseksi tärkein asia on sen aikavaativuus.
Aikavaativuus on algoritmeissa se asia mikä kertoo algoritmin
nopeuden. % lisää tekstiä O(n) ja O(n²) jutusta
Muistinkäyttö on myös otettu huomioon ja yleensä mietimme, että paljonko
muistia algoritmi käyttää. Toimiiko tämä sitten maailmassa, jossa tietokoneissa
on kiintolevy, kenties puolijohdeasema, keskusmuistia ja vielä prosessorin
välimuisti. Missä prosessorin välimuisti koostuu eri kokoisista ja
nopeuksisista välimuisteista.
% jaksottaja
Tähän voidaan lisätä vielä kaikennäköiset verkkolevyt.
Tarkastellaan prosessorin välimuistia verkkolevyihin saakka niin huomataan,
että mitä kauemmaksi siirrytään prosessorin välimuistista niin latenssi
kasvaa
suuremmaksi, nopeus hidastuu ja muistin koko kasvaa.

Kun latenssi
kasvaa niin on ihanteellista, että otamme siitä kyseisestä muistista tarpeeksi
suuren muistilohkon kerralla tarkasteluun. Jos kysyisimme kokoajan pieniä lohkoja tarkasteltavaksi, joutuisimme maksamaan jokaisen lohkon kohalla sekä latenssiin että sen jälkeen tapahtuvaan siirtoon kestävä aika. Voisimme vain maksaa latenssin hinta kerran ja pyytää iso määrä tietoa muistista. Kun otamme muistista ison lohkon niin haluamme myös varmistaa, että saamme myös mahdollisimman paljon relevanttia tietoa algoritmin kannalta. % ehkä kenties avaisit aihetta enemmän?
On siis syytä tallentaan algoritmin tiedot yhtenäisenä palana muistiin, mutta
kuitenkin jaettuna pieniin muistilohkoihin. Jos muistilohko on liian suuri
ja ei mahdu
kerralla prosessoria lähimpänä olevaan välimuistiin niin algoritmi kärsii jokaista
muistilohkoa käsitellessä välimuistihudeista, koska algoritmin käsittelemä
muistilohko on suurempi kuin pienin välimuisti. Välimuistihudiksi siis kutsutaan tapahtumaa missä
prosessori ei löydä välimuistista haluttua muistilohkoa ja joutuu tällöin odottamaan sen saapumista kauemmasta muistista.
Joudumme siis etsimään hitaammista muisteista tämän lohkon ja odottamaan
muistilohkon saapumista käytettäväksi. Tehokas tapa ratkaista tämä on
kirjoittaa välimuistitietoinen algoritmi, joka siis tietää pienimmän
välimuistin koon ja tällöin saa
tietorakenteet mahtumaan pienimpään välimuistiin.

Tälläisten algoritmien erojen selvittämiseen tarvitsemme uuden analyysin
nimeltä muistisiirtokompleksisuus. %KORJAA
Muistisiirtokompleksisuus kertoo meille muistinsiirtojen määrästä ja
mahdollisista hudeista mitä jokin algoritmi tulee aiheuttamaan suorituksen
aikana. Ennenkuin voimme analysoida
algoritmien muistinsiirtovaativuuksia niin tarvitsemme muistimallin.

Välimuistitietoiset algoritmit olettaa,
että välimuistin hierarkia ja koko ovat ennalta tiedossa. Kokeilemalla voidaan
selvittää optimaalinen muistilohko arvo algoritmille. Välimuistitietoiset
algoritmit ovat kuitenkin erittäin rajoittuneita ja ovat ongelmissa, kun
lähdetään vaihtamaan välimuisti hierarkiaa. Tähän on yritetty keksiä
erilaisia malleja, mutta ne ovat luonteeltaan monimutkaisia ja hankalia. Niitä
myös yhdistää se tekijä, että ne ovat riippuvia jostain muistihierarkian
ominaisuudesta.
% mm
%Tähän ongelmaan Prokop on vastannut teesissään\cite{prokop99}. Välimuistiriippumaton malli
%on vähintäänkin hyvä ratkasu tuottaa algoritmi muistihierarkialle, jonka yksityiskohtia ei tiedetä.
%Prokop on tarjonnut ratkaisun monille algoritmeille kuten matriisikertolasku- ja jakelujärjestämisalgoritmi.
%Matriisikertolaskua tarkastellaan myöhemmin yksityiskohtaisemmin.
%
%Välimuistiriippumattomien algoritmien tuottamiseen on pidettävä mielessä miltä
%algoritmin muistijälki näyttää. Esimerkiksi puu algoritmeissa
%on hyvä koota puu monista pienistä puista. Jos ei näin tehdä kun mennään solmusta toiseen niin
%harpataan muistissa suuren muistijoukon yli jokaisella kerralla. Voimme siis laittaa lähekkäin solmu ja sen lapset.
%Näin saadaan hillittyä tätä ilmiötä jonkin verran ja samalla vähennetään välimuistihudin tapahtumista.
%Tätä kutsutaan myös "jaa, ja valloita" lähestymistavaksi. Algoritmi siis itsessään jakaa ongelmaa tarpeeksi pieneksi
%ja jossain kohti se mahtuu välimuistiin. Ongelmaksi tämän jälkeen muodostuu tilallinen sijaitsevuus.
%Kun ongelmaa jaetaan palasiksi niin halutaan, että tämä pitää sen yhtenäisenä muistissa. Tärkein ominaisuus
%tilallisella sijaitsevuudella on se, että kun otetaan suuri muistilohko jostain muistista niin
%siihen mahtuu monta todennäköisesti läpikäytävää solmua.

% insert lähde välimuistiriippumaton b-puut paperista?



\section{Ihanteellinen välimuistimalli}

Ihanteellinen välimuistimalli sisältää %lisää kuva ja maininta
tietokoneen, joka koostuu 2-tasosesta muistihierarkiasta. Muistihierarkiaan
kuuluu välimuisti koostuen $ M $ sanoista ja mielivaltaisen
kokoisesta päämuistista. Välimuistin sana koko on
vakio, koska oikeassakin tietokoneessa se on jonkin muuttumattoman vakion kokoinen.
Kutsumme yhtä muistilohkoa $ B $:ksi ja oletamme prosessoria lähimpään välimuistiin mahtuvan $ M/B $ muistilohkoa.


















\section{Välimuistiriippumaton matriisikertolasku}


% --- Back matter ---
%
% bibtex is used to generate the bibliography. The babplain style
% will generate numeric references (e.g. [1]) appropriate for theoretical
% computer science. If you need alphanumeric references (e.g [Tur90]), use
%
% \bibliographystyle{babalpha}
%
% instead.

\bibliographystyle{babplain}
\bibliography{references-fi}


\end{document}
